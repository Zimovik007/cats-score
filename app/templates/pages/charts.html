<script>
    $("#parameter").change(function () {
        $("#run_cnt_params").css("display", $("#parameter").val() == "run_cnt" ? "block" : "none");
    });

    var statuses = {
        'accepted': 'OK',
        'wrong_answer': 'WA',
        'presentation_error': 'PE',
        'time_limit_exceeded': 'TL',
        'runtime_error': 'RE',
        'compilation_error': 'CE',
        'security_violation': 'SV',
        'memory_limit_exceeded': 'ML',
        'ignore_submit': 'IS',
        'idleness_limit_exceeded': 'IL',
    };

    $.each(statuses, function (k, v) {
       $("#statuses").append('<input class="selector" name="statuses" type="checkbox" value="' + k + '" checked="checked" />' + v);
    });

    $.plot("#plot", <%=JSON.stringify(app.charts[models.chart].series)%>, {xaxes: [{ position: 'bottom' }], yaxes: [
    <%
        for(var i = 0; i < app.charts[models.chart].series.length; ++i) {
    %>
        { position: 'left' },
    <%
        }
    %>
    ]});
</script>
<%
var contest_id = models.contest;
var contest = app.contests[contest_id];
%>
<div class="box">
    <div>
        <label>Time period:</label>
        <input type="text" size="20" id="period" value="10">
    </div>
    <div>
        <label>Parameter(not work):</label>
        <select id="parameter">
            <option value="run_cnt">run count</option>
            <option value="points">points</option>
            <option value="place">place</option>
        </select>
    </div>
    <div>
        <label>Aggregation(not work):</label>
        <select id="aggregation">
            <option>sum</option>
            <option>average</option>
            <option>minimum</option>
            <option>maximum</option>
        </select>
    </div>
    <div id="run_cnt_params">
        <div>
            <label>Problem:</label>
            <div>
            <%
            var prs = contest.problems;
            for(var i = 0; i < prs.length; ++i) {
            %>
                <input class="selector" type="checkbox" name="problems" checked="checked" value="<%=prs[i]%>" /><strong><%=app.problems[prs[i]].code%></strong>(<%=app.problems[prs[i]].name%>)
            <%
            };
            %>
            </div>
        </div>
        <div>
            <label>Result:</label>
            <div id="statuses">
            </div>
        </div>
    </div>
    <div>
        <label>User: <input type="text" size="20" id="user" value=".*?"></label>
    </div>
    <div>
        <label>Affiliation: <input type="text" size="20" id="affiliation" value=".*?"></label>
    </div>
    <div>
        <label>Color(not work):
            <input class="selector" type="radio" name="color"><span style="background:red">red</span>
            <input class="selector" type="radio" name="color"><span style="background:green">green</span>
        </label>
    </div>
    <div><button id="add_series">Add</button></div>
</div>
<div id="plot_container">
<div id="plot"></div>
</div>
